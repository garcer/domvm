{"version":3,"file":null,"sources":["../../src/view/VTYPES.js","../../src/utils.js","../../src/streamCfg.js","../../src/view/utils.js","../../src/view/patchStyle.js","../../src/view/patchEvent.js","../../src/view/patchAttrs.js","../../src/view/createView.js","../../src/view/hooks.js","../../src/view/VNode.js","../../src/view/parseTag.js","../../src/view/defineElement.js","../../src/view/dom.js","../../src/view/hydrate.js","../../src/view/syncChildren.js","../../src/view/patch.js","../../src/view/preProc.js","../../src/view/ViewModel.js","../../src/view/defineText.js","../../src/view/defineComment.js","../../src/view/defineFragment.js","../../src/view/VView.js","../../src/view/defineView.js","../../src/view/VModel.js","../../src/view/injectView.js","../../src/view/injectElement.js","../builds/nano.js","../../src/view/addons/patch.js","../../src/view/addons/emit.js","../../src/streamFlyd.js","../builds/mini.js","../../src/router.js","../builds/small.js"],"sourcesContent":["export const ELEMENT\t= 1;\nexport const TEXT\t\t= 2;\nexport const COMMENT\t= 3;\nexport const FRAGMENT\t= 4;\n\n// placeholder nodes\nexport const VVIEW\t\t= 5;\nexport const VMODEL\t\t= 6;","const ENV_DOM = typeof HTMLElement == \"function\";\nconst win = ENV_DOM ? window : {};\nconst rAF = win.requestAnimationFrame;\n\nexport const emptyObj = {};\n\nexport function startsWith(haystack, needle) {\n\treturn haystack.lastIndexOf(needle, 0) === 0;\n}\n\nexport function isUndef(val) {\n\treturn typeof val == \"undefined\";\n}\n\nexport const isArr = Array.isArray;\n\nexport function isObj(val) {\n\treturn val != null && typeof val == \"object\" && val.constructor == Object;\n}\n\nexport function insertArr(targ, arr, pos, rem) {\n\ttarg.splice.apply(targ, [pos, rem].concat(arr));\n}\n\nexport function isVal(val) {\n\tvar t = typeof val;\n\treturn t === \"string\" || t === \"number\";\n}\n\nexport function isFunc(val) {\n\treturn typeof val === \"function\";\n}\n\nexport function isProm(val) {\n\treturn typeof val === \"object\" && isFunc(val.then);\n}\n\nexport function isElem(val) {\n\treturn ENV_DOM && val instanceof HTMLElement;\n}\n\nexport function assignObj(targ) {\n\tvar args = arguments;\n\n\tfor (var i = 1; i < args.length; i++)\n\t\tfor (var k in args[i])\n\t\t\ttarg[k] = args[i][k];\n\n\treturn targ;\n}\n\nexport function deepSet(targ, path, val) {\n\tvar seg;\n\n\twhile (seg = path.shift()) {\n\t\tif (path.length == 0)\n\t\t\ttarg[seg] = val;\n\t\telse\n\t\t\ttarg[seg] = targ = targ[seg] || {};\n\t}\n}\n/*\nexport function deepUnset(targ, path) {\n\tvar seg;\n\n\twhile (seg = path.shift()) {\n\t\tif (path.length == 0)\n\t\t\ttarg[seg] = val;\n\t\telse\n\t\t\ttarg[seg] = targ = targ[seg] || {};\n\t}\n}\n*/\n\nexport function sliceArgs(args, offs) {\n\treturn Array.prototype.slice.call(args, offs || 0)\n}\n\nexport function cmpArr(a, b) {\n\tconst alen = a.length;\n\n\tif (b.length != alen)\n\t\treturn false;\n\n\tfor (var i = 0; i < alen; i++)\n\t\tif (a[i] !== b[i])\n\t\t\treturn false;\n\n\treturn true;\n}\n\n// https://github.com/darsain/raft\n// rAF throttler, aggregates multiple repeated redraw calls within single animframe\nexport function raft(fn) {\n\tif (!rAF)\n\t\treturn fn;\n\n\tvar id, ctx, args;\n\n\tfunction call() {\n\t\tid = 0;\n\t\tfn.apply(ctx, args);\n\t}\n\n\treturn function() {\n\t\tctx = this;\n\t\targs = arguments;\n\t\tif (!id) id = rAF(call);\n\t};\n}\n\nexport function curry(fn, args, ctx) {\n\treturn function() {\n\t\treturn fn.apply(ctx, args);\n\t};\n}\n\nexport function prop(val, cb, ctx, args) {\n\treturn function(newVal, execCb) {\n\t\tif (!isUndef(newVal) && newVal !== val) {\n\t\t\tval = newVal;\n\t\t\texecCb !== false && isFunc(cb) && cb.apply(ctx, args);\n\t\t}\n\n\t\treturn val;\n\t};\n}","export let isStream = null;\nexport let streamVal = null;\nexport let subStream = null;\nexport let unsubStream = null;\n\n/* example flyd adapter:\n{\n\tis:\t\ts => flyd.isStream(s),\n\tval:\ts => s(),\n\tsub:\t(s,fn) => flyd.on(fn, s),\n\tunsub:\ts => s.end(),\n}\n*/\nexport function streamCfg(cfg) {\n\tisStream\t= cfg.is;\n\tstreamVal\t= cfg.val;\n\tsubStream\t= cfg.sub;\n\tunsubStream\t= cfg.unsub;\n}","import { startsWith, isUndef } from '../utils';\nimport { streamVal, subStream, unsubStream } from '../streamCfg';\n\nconst t = true;\n\nconst unitlessProps = {\n\tanimationIterationCount: t,\n\tboxFlex: t,\n\tboxFlexGroup: t,\n\tcolumnCount: t,\n\tcounterIncrement: t,\n\tfillOpacity: t,\n\tflex: t,\n\tflexGrow: t,\n\tflexOrder: t,\n\tflexPositive: t,\n\tflexShrink: t,\n\tfloat: t,\n\tfontWeight: t,\n\tgridColumn: t,\n\tlineHeight: t,\n\tlineClamp: t,\n\topacity: t,\n\torder: t,\n\torphans: t,\n\tstopOpacity: t,\n\tstrokeDashoffset: t,\n\tstrokeOpacity: t,\n\tstrokeWidth: t,\n\ttabSize: t,\n\ttransform: t,\n\ttransformOrigin: t,\n\twidows: t,\n\tzIndex: t,\n\tzoom: t,\n};\n\nexport function autoPx(name, val) {\n\treturn !isNaN(val) && !unitlessProps[name] ? (val + \"px\") : val;\n}\n\nexport function camelDash(val) {\n\treturn val.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n}\n\nexport function styleStr(css) {\n\tvar style = \"\";\n\n\tfor (var pname in css) {\n\t\tif (css[pname] !== null)\n\t\t\tstyle += camelDash(pname) + \": \" + autoPx(pname, css[pname]) + '; ';\n\t}\n\n\treturn style;\n}\n\nexport function isEvProp(name) {\n\treturn startsWith(name, \"on\");\n}\n\nexport function isSplProp(name) {\n\treturn name[0] == \"_\";\n}\n\nexport function isStyleProp(name) {\n\treturn name == \"style\";\n}\n\nexport function repaint(node) {\n\tnode && node.el && node.el.offsetHeight;\n}\n\n// tests interactive props where real val should be compared\nexport function isDynProp(tag, attr) {\n//\tswitch (tag) {\n//\t\tcase \"input\":\n//\t\tcase \"textarea\":\n//\t\tcase \"select\":\n//\t\tcase \"option\":\n\t\t\tswitch (attr) {\n\t\t\t\tcase \"value\":\n\t\t\t\tcase \"checked\":\n\t\t\t\tcase \"selected\":\n\t\t\t\tcase \"selectedIndex\":\n\t\t\t\t\treturn true;\n\t\t\t}\n//\t}\n\n\treturn false;\n}\n\n// creates a one-shot self-ending stream that redraws target vm\n// TODO: if it's already registered by any parent vm, then ignore to avoid simultaneous parent & child refresh\nexport function hookStream(s, vm) {\n\tvar redrawStream = subStream(s, val => {\n\t\t// this \"if\" ignores the initial firing during subscription (there's no redrawable vm yet)\n\t\tif (redrawStream) {\n\t\t\t// if vm fully is formed (or mounted vm.node.el?)\n\t\t\tif (vm.node != null)\n\t\t\t\tvm.redraw();\n\t\t\tunsubStream(redrawStream);\n\t\t}\n\t});\n\n\treturn streamVal(s);\n}","import { autoPx, hookStream } from './utils';\nimport { isVal } from '../utils';\nimport { isStream } from '../streamCfg';\n\n// assumes if styles exist both are objects or both are strings\nexport function patchStyle(n, o) {\n\tvar ns = n.attrs.style;\n\tvar os = o ? o.attrs.style : null;\t\t// || emptyObj?\n\n\t// replace or remove in full\n\tif (ns == null || isVal(ns))\n\t\tn.el.style.cssText = ns;\n\telse {\n\t\tfor (var nn in ns) {\n\t\t\tvar nv = ns[nn];\n\n\t\t\tif (isStream != null && isStream(nv))\n\t\t\t\tnv = hookStream(nv, n.vm());\n\n\t\t\tif (os == null || nv != null && nv !== os[nn])\n\t\t\t\tn.el.style[nn] = autoPx(nn, nv);\n\t\t}\n\n\t\t// clean old\n\t\tif (os) {\n\t\t\tfor (var on in os) {\n\t\t\t\tif (ns[on] == null)\n\t\t\t\t\tn.el.style[on] = \"\";\n\t\t\t}\n\t\t}\n\t}\n}","import { isArr, isFunc, cmpArr } from '../utils';\n\nfunction bindEv(el, type, fn) {\n//\tDEBUG && console.log(\"addEventListener\");\n\tel[type] = fn;\n}\n\nfunction handle(e, fn, args) {\n\tvar node = e.target._node;\n\tvar out = fn.apply(null, args.concat(e, node, node.vm()));\n\n\tif (out === false) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t}\n}\n\nfunction wrapHandler(fn, args) {\n//\tconsole.log(\"wrapHandler\");\n\n\treturn function wrap(e) {\n\t\thandle(e, fn, args);\n\t}\n}\n\n// delagated handlers {\".moo\": [fn, a, b]}, {\".moo\": fn}\nfunction wrapHandlers(hash) {\n//\tconsole.log(\"wrapHandlers\");\n\n\treturn function wrap(e) {\n\t\tfor (var sel in hash) {\n\t\t\tif (e.target.matches(sel)) {\n\t\t\t\tvar hnd = hash[sel];\n\t\t\t\tvar isarr = isArr(hnd);\n\t\t\t\tvar fn = isarr ? hnd[0] : hnd;\n\t\t\t\tvar args = isarr ? hnd.slice(1) : [];\n\n\t\t\t\thandle(e, fn, args);\n\t\t\t}\n\t\t}\n\t}\n}\n\n// could merge with on*\n\nexport function patchEvent(node, name, nval, oval) {\n\tif (nval === oval)\n\t\treturn;\n\n\tvar el = node.el;\n\n\t// param'd eg onclick: [myFn, 1, 2, 3...]\n\tif (isArr(nval)) {\n\t\tvar diff = oval == null || !cmpArr(nval, oval);\n\t\tdiff && bindEv(el, name, wrapHandler(nval[0], nval.slice(1)));\n\t}\n\t// basic onclick: myFn (or extracted)\n\telse if (isFunc(nval) && nval != oval)\n\t\tbindEv(el, name, wrapHandler(nval, []));\n\t// delegated onclick: {\".sel\": myFn} & onclick: {\".sel\": [myFn, 1, 2, 3]}\n\telse\t\t// isObj, TODO:, diff with old/clean\n\t\tbindEv(el, name, wrapHandlers(nval));\n}","import { isStyleProp, isSplProp, isEvProp, isDynProp, hookStream } from './utils';\nimport { isFunc, emptyObj } from '../utils';\nimport { patchStyle } from './patchStyle';\nimport { patchEvent } from './patchEvent';\nimport { isStream } from '../streamCfg';\n\nexport function remAttr(node, name) {\t\t// , asProp\n\tnode.el.removeAttribute(name);\n}\n\n// setAttr\n// diff, \".\", \"on*\", bool vals, skip _*, value/checked/selected selectedIndex\nexport function setAttr(node, name, val, asProp) {\n\tvar el = node.el;\n\n\tif (val == null)\n\t\tremAttr(node, name);\t\t//, asProp?  // will also removeAttr of style: null\n\telse if (name == \"class\")\n\t\tel.className = val;\n\telse if (name == \"id\" || typeof val == \"boolean\" || asProp)\n\t\tel[name] = val;\n\telse if (name[0] == \".\")\n\t\tel[name.substr(1)] = val;\n\telse\n\t\tel.setAttribute(name, val);\n}\n\nexport function patchAttrs(vnode, donor) {\n\tconst nattrs = vnode.attrs || emptyObj;\n\tconst oattrs = donor.attrs || emptyObj;\n\n\tfor (var key in nattrs) {\n\t\tvar nval = nattrs[key];\n\t\tvar isDyn = isDynProp(vnode.tag, key);\n\t\tvar oval = isDyn ? vnode.el[key] : oattrs[key];\n\n\t\tif (isStream != null && isStream(nval))\n\t\t\tnattrs[key] = nval = hookStream(nval, vnode.vm());\n\n\t\tif (nval === oval) {}\n\t\telse if (isStyleProp(key))\n\t\t\tpatchStyle(vnode, donor);\n\t\telse if (isSplProp(key)) {}\n\t\telse if (isEvProp(key))\n\t\t\tpatchEvent(vnode, key, nval, oval);\n\t\telse\n\t\t\tsetAttr(vnode, key, nval, isDyn);\n\t}\n\n\tfor (var key in oattrs) {\n\t//\tif (nattrs[key] == null &&\n\t\tif (!(key in nattrs) &&\n\t\t\t!isStyleProp(key) &&\n\t\t\t!isSplProp(key) &&\n\t\t\t!isEvProp(key)\n\t\t)\n\t\t\tremAttr(vnode, key);\n\t}\n}","import { ELEMENT, TEXT, COMMENT, VVIEW, VMODEL } from './VTYPES';\nimport { ViewModel } from './ViewModel';\n\nexport function createView(view, model, key, opts) {\n\tif (view.type == VVIEW) {\n\t\tmodel\t= view.model;\n\t\tkey\t\t= view.key;\n\t\topts\t= view.opts;\n\t\tview\t= view.view;\n\t}\n\n\treturn new ViewModel(view, model, key, opts);\n}","import { isArr, startsWith } from '../utils';\nimport { repaint } from './utils';\n\nexport const didQueue = [];\n\nfunction fireHook(did, fn, o, n, immediate) {\n\tif (did) {\t// did*\n\t\t//\tconsole.log(name + \" should queue till repaint\", o, n);\n\t\timmediate ? repaint(o.parent) && fn(o, n) : didQueue.push([fn, o, n]);\n\t}\n\telse {\t\t// will*\n\t\t//\tconsole.log(name + \" may delay by promise\", o, n);\n\t\treturn fn(o, n);\t\t// or pass  done() resolver\n\t}\n}\n\nexport function fireHooks(name, o, n, immediate) {\n\tvar hook = o.hooks[name];\n\n\tif (hook) {\n\t\tvar did = startsWith(name, \"did\");\n\n\t\tif (isArr(hook)) {\n\t\t\t// TODO: promise.all() this?\n\t\t\treturn hook.map(function(hook2) {\n\t\t\t\treturn fireHook(did, hook2, o, n);\n\t\t\t});\n\t\t}\n\t\telse\n\t\t\treturn fireHook(did, hook, o, n, immediate);\n\t}\n}","import { views } from './ViewModel';\n\nexport function VNode(type) {\n\tthis.type = type;\n}\n\nexport const VNodeProto = VNode.prototype = {\n\tconstructor: VNode,\n\n\ttype:\tnull,\n\n\tvm: function() {\n\t\tvar n = this;\n\n\t\tdo {\n\t\t\tif (n.vmid != null)\n\t\t\t\treturn views[n.vmid];\n\t\t} while (n.parent && (n = n.parent));\n\t},\n\n\tvmid:\tnull,\n\n\t// if fragment node, this is set to a [head, tail] tuple of wrapping CommentNodes\n\t_frag: null,\n\n\t// all this stuff can just live in attrs (as defined) just have getters here for it\n\tkey:\tnull,\n\tref:\tnull,\n\tdata:\tnull,\n\thooks:\tnull,\n\traw:\tfalse,\n\n\tel:\t\tnull,\n\n\ttag:\tnull,\n\tattrs:\tnull,\n\tbody:\tnull,\n\tflags:\t0,\n\n\t_class:\tnull,\n\n\tidx:\tnull,\n\tparent:\tnull,\n\n\t// transient flags maintained for cleanup passes, delayed hooks, etc\n//\t_recycled:\t\tfalse,\t\t// true when findDonor/graft pass is done\n//\t_wasSame:\t\tfalse,\t\t// true if _diff result was false\n//\t_delayedRemove:\tfalse,\t\t// true when willRemove hook returns a promise\n\n//\t_setTag: function() {},\n\n\t/*\n\t// break out into optional fluent module\n\tkey:\tfunction(val) { this.key\t= val; return this; },\n\tref:\tfunction(val) { this.ref\t= val; return this; },\t\t// deep refs\n\tdata:\tfunction(val) { this.data\t= val; return this; },\n\thooks:\tfunction(val) { this.hooks\t= val; return this; },\t\t// h(\"div\").hooks()\n\thtml:\tfunction(val) { this.html\t= true; return this.body(val); },\n\n\tbody:\tfunction(val) { this.body\t= val; return this; },\n\t*/\n};","const tagCache = {};\n\nconst RE_ATTRS = /\\[(\\w+)(?:=(\\w+))?\\]/g;\n\n//\tfunction VTag() {}\nexport function parseTag(raw) {\n\tvar cached = tagCache[raw];\n\n\tif (cached == null) {\n\t\tvar tag, id, cls, attr;\n\n\t\ttagCache[raw] = cached = {\n\t\t\ttag:\t(tag\t= raw.match( /^[-\\w]+/))\t\t?\ttag[0]\t\t\t\t\t\t: \"div\",\n\t\t\tid:\t\t(id\t\t= raw.match( /#([-\\w]+)/))\t\t? \tid[1]\t\t\t\t\t\t: null,\n\t\t\tclass:\t(cls\t= raw.match(/\\.([-\\w.]+)/))\t\t?\tcls[1].replace(/\\./g, \" \")\t: null,\n\t\t\tattrs:\tnull,\n\t\t};\n\n\t\twhile (attr = RE_ATTRS.exec(raw)) {\n\t\t\tif (cached.attrs == null)\n\t\t\t\tcached.attrs = {};\n\t\t\tcached.attrs[attr[1]] = attr[2] || \"\";\n\t\t}\n\t}\n\n\treturn cached;\n}","import { ELEMENT, TEXT, COMMENT, VVIEW, VMODEL } from './VTYPES';\nimport { VNode } from './VNode';\nimport { parseTag } from './parseTag';\nimport { isObj, isUndef } from '../utils';\n\n// optimization flags\n\n// prevents inserting/removing/reordering of children\nexport const FIXED_BODY = 1;\n// doesnt fire eager deep willRemove hooks, doesnt do bottom-up removeChild\nexport const FAST_REMOVE = 2;\n\nexport function defineElement(tag, arg1, arg2, flags) {\n\tvar node = new VNode(ELEMENT);\n\n\tif (flags != null)\n\t\tnode.flags = flags;\n\n\tvar attrs, body;\n\n\tif (isUndef(arg2)) {\n\t\tif (isObj(arg1))\n\t\t\tattrs = arg1;\n\t\telse\n\t\t\tbody = arg1;\n\t}\n\telse {\n\t\tattrs = arg1;\n\t\tbody = arg2;\n\t}\n\n\tif (attrs != null) {\n\t\tif (attrs._key != null)\n\t\t\tnode.key = attrs._key;\n\n\t\tif (attrs._ref != null)\n\t\t\tnode.ref = attrs._ref;\n\n\t\tif (attrs._hooks != null)\n\t\t\tnode.hooks = attrs._hooks;\n\n\t\tif (attrs._raw != null)\n\t\t\tnode.raw = attrs._raw;\n\n\t\tif (attrs._data != null)\n\t\t\tnode.data = attrs._data;\n\n\t\tif (node.key == null) {\n\t\t\tif (node.ref != null)\n\t\t\t\tnode.key = node.ref;\n\t\t\telse if (attrs.id != null)\n\t\t\t\tnode.key = attrs.id;\n\t\t\telse if (attrs.name != null)\n\t\t\t\tnode.key = attrs.name;\n\t\t}\n\n\t\tnode.attrs = attrs;\n\t}\n\n\tvar parsed = parseTag(tag);\n\n\tnode.tag = parsed.tag;\n\n\tif (parsed.id || parsed.class || parsed.attrs) {\n\t\tvar p = node.attrs || {};\n\n\t\tif (parsed.id && p.id == null)\n\t\t\tp.id = parsed.id;\n\n\t\tif (parsed.class) {\n\t\t\tnode._class = parsed.class;\t\t// static class\n\t\t\tp.class = parsed.class + (p.class != null ? (\" \" + p.class) : \"\");\n\t\t}\n\t\tif (parsed.attrs) {\n\t\t\tfor (var key in parsed.attrs)\n\t\t\t\tif (p[key] == null)\n\t\t\t\t\tp[key] = parsed.attrs[key];\n\t\t}\n\n//\t\tif (node.attrs != p)\n\t\t\tnode.attrs = p;\n\t}\n\n\tif (body != null)\n\t\tnode.body = body;\n\n\treturn node;\n}","import { isArr, isProm, curry } from '../utils';\nimport { fireHooks } from './hooks';\nimport { views } from './ViewModel';\nimport { FIXED_BODY, FAST_REMOVE } from './defineElement';\n\nexport function createElement(tag) {\n\treturn document.createElement(tag);\n}\n\nexport function createTextNode(body) {\n\treturn document.createTextNode(body);\n}\n\nexport function createComment(body) {\n\treturn document.createComment(body);\n}\n\nexport function createFragment() {\n\treturn document.createDocumentFragment();\n}\n\n/*\nthese only need to run when el._node.vmid != null\nexport function firstChild(el) {\n\tif (el.nodeType == 8 && el._frag != null)\n\t\treturn el.\n\treturn el.firstChild;\n}\n\nexport function lastChild(el) {\n\tif (el.nodeType == 8 && el._frag != null)\n\n\treturn el.lastChild;\n}\n*/\n\n// ? removes if !recycled\nexport function nextSib(sib) {\n\treturn sib.nextSibling;\n}\n\n// ? removes if !recycled\nexport function prevSib(sib) {\n\treturn sib.previousSibling;\n}\n\n// TODO: this should collect all deep proms from all hooks and return Promise.all()\nfunction deepNotifyRemove(node) {\n\tvar hooks = node.hooks;\n\tvar vm = node.vmid != null ? node.vm() : null;\n\n\tvm && vm.hooks && fireHooks(\"willUnmount\", vm);\n\n\tvar res = hooks && fireHooks(\"willRemove\", node);\n\n\tif (!(node.flags & FAST_REMOVE) && isArr(node.body))\n\t\tnode.body.forEach(deepNotifyRemove);\n\n\treturn res;\n}\n\nfunction _removeChild(parEl, el, immediate) {\n\tvar node = el._node, hooks = node.hooks;\n\n\tvar vm = node.vmid != null ? node.vm() : null;\n\n//\tif (node.ref != null && node.ref[0] == \"^\")\t\t\t// this will fail for fixed-nodes?\n//\t\tconsole.log(\"clean exposed ref\", node.ref);\n\n\tif (!(node.flags & FAST_REMOVE) && isArr(node.body)) {\n\t//\tvar parEl = node.el;\n\t\tfor (var i = 0; i < node.body.length; i++)\n\t\t\t_removeChild(el, node.body[i].el);\n\t}\n\n\tparEl.removeChild(el);\n\n\thooks && fireHooks(\"didRemove\", node, null, immediate);\n\n\tvm && vm.hooks && fireHooks(\"didUnmount\", vm, null, immediate);\n}\n\n// todo: should delay parent unmount() by returning res prom?\nexport function removeChild(parEl, el) {\n\tvar node = el._node, hooks = node.hooks;\n\n\tvar res = deepNotifyRemove(node);\n\n\tif (res != null && isProm(res))\n\t\tres.then(curry(_removeChild, [parEl, el, true]));\n\telse\n\t\t_removeChild(parEl, el);\n}\n\n// todo: hooks\nexport function insertBefore(parEl, el, refEl) {\n\tvar node = el._node, hooks = node.hooks, inDom = el.parentNode;\n\n\tvar vm = !inDom && node.vmid != null ? node.vm() : null;\n\n\tvm && vm.hooks && fireHooks(\"willMount\", vm);\n\n\t// this first happens during view creation, but if view is\n\t// ever unmounted & remounted later, need to re-register\n\tvm && (views[vm.id] = vm);\n\n\thooks && fireHooks(inDom ? \"willReinsert\" : \"willInsert\", node);\n\tparEl.insertBefore(el, refEl);\n\thooks && fireHooks(inDom ? \"didReinsert\" : \"didInsert\", node);\n\n\tvm && vm.hooks && fireHooks(\"didMount\", vm);\n}\n\nexport function insertAfter(parEl, el, refEl) {\n\tinsertBefore(parEl, el, refEl ? nextSib(refEl) : null);\n}","import { ELEMENT, TEXT, COMMENT, FRAGMENT, VVIEW, VMODEL } from './VTYPES';\nimport { isArr } from '../utils';\nimport { views } from './ViewModel';\nimport { isStyleProp, isSplProp, isEvProp, isDynProp, hookStream } from './utils';\nimport { isStream } from '../streamCfg';\nimport { setAttr } from './patchAttrs';\nimport { patchStyle } from './patchStyle';\nimport { patchEvent } from './patchEvent';\nimport { createView } from './createView';\nimport { createElement, createTextNode, insertBefore, createComment, createFragment } from './dom';\n\n\n// TODO: DRY this out. reusing normal patchAttrs here negatively affects V8's JIT\nfunction patchAttrs2(vnode) {\n\tvar nattrs = vnode.attrs;\n\n\tfor (var key in nattrs) {\n\t\tvar nval = nattrs[key];\n\t\tvar isDyn = isDynProp(vnode.tag, key);\n\n\t\tif (isStream != null && isStream(nval))\n\t\t\tnattrs[key] = nval = hookStream(nval, vnode.vm());\n\n\t\tif (isStyleProp(key))\n\t\t\tpatchStyle(vnode);\n\t\telse if (isSplProp(key)) {}\n\t\telse if (isEvProp(key))\n\t\t\tpatchEvent(vnode, key, nval);\n\t\telse if (nval != null)\n\t\t\tsetAttr(vnode, key, nval, isDyn);\n\t}\n}\n\n//  TODO: DRY this out. reusing normal patch here negatively affects V8's JIT\nexport function hydrate(vnode, withEl) {\n\tif (vnode.el == null) {\n\t\tif (vnode.type === ELEMENT) {\n\t\t\tvnode.el = withEl || createElement(vnode.tag);\n\n\t\t\tif (vnode.attrs != null)\n\t\t\t\tpatchAttrs2(vnode);\n\n\t\t\tif (isArr(vnode.body))\n\t\t\t\thydrateBodyArr(vnode);\n\t\t\telse if (vnode.body != null && vnode.body !== \"\") {\n\t\t\t\tif (vnode.raw)\n\t\t\t\t\tvnode.el.innerHTML = vnode.body;\n\t\t\t\telse\n\t\t\t\t\tvnode.el.textContent = vnode.body;\n\t\t\t}\n\t\t}\n\t\telse if (vnode.type === TEXT)\n\t\t\tvnode.el = withEl || createTextNode(vnode.body);\n\t\telse if (vnode.type === FRAGMENT) {\n\t\t\tvar head = createComment(vnode.vmid),\n\t\t\t\ttail = createComment(\"/\" + vnode.vmid);\n\n\t\t\thead._node = tail._node = vnode;\n\t\t\tvnode._frag = [head, tail];\n\t\t\tvnode.el = createFragment();\n\t\t\tinsertBefore(vnode.el, head);\n\t\t\thydrateBodyArr(vnode);\n\t\t\tinsertBefore(vnode.el, tail);\n\t\t}\n\t}\n\n\tvnode.el._node = vnode;\n\n\treturn vnode.el;\n}\n\nfunction hydrateBodyArr(vnode) {\n\tfor (var i = 0; i < vnode.body.length; i++) {\n\t\tvar vnode2 = vnode.body[i];\n\t\tvar type2 = vnode2.type;\n\n\t\tif (type2 == ELEMENT || type2 == TEXT || type2 == COMMENT)\n\t\t\tinsertBefore(vnode.el, hydrate(vnode2));\t\t// vnode.el.appendChild(hydrate(vnode2))\n\t\telse if (type2 == VVIEW) {\n\t\t\tvar vm = createView(vnode2.view, vnode2.model, vnode2.key, vnode2.opts)._redraw(vnode, i, false);\t\t// todo: handle new model updates\n\t\t\tinsertBefore(vnode.el, hydrate(vm.node));\n\t\t}\n\t\telse if (type2 == VMODEL) {\n\t\t\tvar vm = views[vnode2.vmid];\n\t\t\tvm._redraw(vnode, i);\t\t\t\t\t// , false\n\t\t\tinsertBefore(vnode.el, vm.node.el);\t\t// , hydrate(vm.node)\n\t\t}\n\t}\n}","import { hydrate } from './hydrate';\nimport { prevSib, nextSib, insertBefore, insertAfter, removeChild } from './dom';\n\n//import { DEBUG } from './DEBUG';\n\nfunction nextNode(node, body) {\n\treturn body[node.idx + 1];\n}\n\nfunction prevNode(node, body) {\n\treturn body[node.idx - 1];\n}\n\nfunction tmpEdges(fn, parEl, lftSib, rgtSib) {\n\t// get outer immute edges\n\tvar lftLft = prevSib(lftSib);\n\tvar rgtRgt = nextSib(rgtSib);\n\n\tfn(lftLft, rgtRgt);\n\n\treturn {\n\t\tlftSib: lftLft ? nextSib(lftLft) : parEl.firstChild,\n\t\trgtSib: rgtRgt ? prevSib(rgtRgt) : parEl.lastChild,\n\t};\n}\n\nfunction headTailTry(parEl, lftSib, lftNode, rgtSib, rgtNode) {\n//\tDEBUG && console.log(\"try head/tail magic\");\n\n\tvar areAdjacent\t= rgtNode.idx === lftNode.idx + 1;\n\tvar headToTail = areAdjacent ? false : lftSib._node === rgtNode;\n\tvar tailToHead = areAdjacent ? true  : rgtSib._node === lftNode;\n\n\tif (headToTail || tailToHead) {\n\t\treturn tmpEdges(function(lftLft, rgtRgt) {\n\t\t\tif (tailToHead)\n\t\t\t\tinsertBefore(parEl, rgtSib, lftSib);\n\n\t\t\tif (headToTail)\n\t\t\t\tinsertBefore(parEl, lftSib, rgtRgt);\n\t\t}, parEl, lftSib, rgtSib);\n\t}\n\n\treturn null;\n}\n\n// init vm,\n\n// selection sort of DOM (cause move cost >> cmp cost)\n// todo: skip removed\nfunction sortDOM(parEl, lftSib, rgtSib, cmpFn) {\n//\tDEBUG && console.log(\"selection sort!\");\n\n\treturn tmpEdges(function(lftLft, rgtRgt) {\n\t\tvar min = null;\n\n\t\tfor (var i = lftSib; i !== rgtRgt; i = nextSib(i)) {\n\t\t\tlftSib = min = i;\n\n\t\t\tfor (var j = nextSib(i); j !== rgtRgt; j = nextSib(j)) {\n\t\t\t\tif (cmpFn(min, j) > 0)\n\t\t\t\t\tmin = j;\n\t\t\t}\n\n\t\t\tif (min === i)\n\t\t\t\tcontinue;\n\n\t\t\tinsertBefore(parEl, min, lftSib);\n\n\t\t\ti = min;\n\t\t}\n\t}, parEl, lftSib, rgtSib);\n}\n\nfunction cmpElNodeIdx(a, b) {\n\treturn a._node.idx - b._node.idx;\n}\n\nexport function syncChildren(node, parEl) {\n\tvar body = node.body;\n\t// breaking condition is convergance\n\n\tvar lftNode\t\t= body[0],\n\t\tlftSib\t\t= parEl.firstChild,\n\t\trgtNode\t\t= body[body.length - 1],\n\t\trgtSib\t\t= parEl.lastChild,\n\t\tnewSibs\t\t= null;\n\n\tvar tmpSib = null;\n\n\tif (lftSib == null) {\n\t\tbody.forEach(node2 => parEl.appendChild(hydrate(node2)));\n\t\treturn;\n\t}\n\telse if (lftNode == null) {\n//\t\tDEBUG && console.log(\"todo: full dehydrate\");\n\t}\n\n\tconverge:\n\twhile (1) {\n//\t\tDEBUG && console.log(\"from_left\");\n//\t\tfrom_left:\n\t\twhile (1) {\n\t\t\tif (lftSib)\n\t\t\t\tvar lsNode = lftSib._node;\n\n\t\t\t// remove any non-recycled sibs whose el.node has the old parent\n\t\t\tif (lftSib && !lsNode.recycled && lsNode.parent != parEl._node) {\n\t\t\t\ttmpSib = nextSib(lftSib);\n\t\t\t\tlsNode.vmid != null ? lsNode.vm().unmount(true) : removeChild(parEl, lftSib);\n\t\t\t\tlftSib = tmpSib;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (lftNode == null)\t\t// reached end\n\t\t\t\tbreak converge;\n\t\t\telse if (lftNode.el == null) {\n\t\t\t\tinsertBefore(parEl, hydrate(lftNode), lftSib);\t\t// lftNode.vmid != null ? lftNode.vm().mount(parEl, false, true, lftSib) :\n\t\t\t\tlftNode = nextNode(lftNode, body);\n\t\t\t}\n\t\t\telse if (lftNode.el === lftSib) {\n\t\t\t\tlftNode = nextNode(lftNode, body);\n\t\t\t\tlftSib = nextSib(lftSib);\n\t\t\t}\n\t\t\telse\n\t\t\t\tbreak;\n\t\t}\n\n//\t\tDEBUG && console.log(\"from_right\");\n//\t\tfrom_right:\n\t\twhile(1) {\n\t\t\tif (rgtSib)\n\t\t\t\tvar rsNode = rgtSib._node;\n\n\t\t\tif (rgtSib && !rsNode.recycled && rsNode.parent != parEl._node) {\n\t\t\t\ttmpSib = prevSib(rgtSib);\n\t\t\t\trsNode.vmid != null ? rsNode.vm().unmount(true) : removeChild(parEl, rgtSib);\n\t\t\t\trgtSib = tmpSib;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (rgtNode == lftNode)\t\t// converged\n\t\t\t\tbreak converge;\n\t\t\tif (rgtNode.el == null) {\n\t\t\t\tinsertAfter(parEl, hydrate(rgtNode), rgtSib);\t\t// rgtNode.vmid != null ? rgtNode.vm().mount(parEl, false, true, nextSib(rgtSib) :\n\t\t\t\trgtNode = prevNode(rgtNode, body);\n\t\t\t}\n\t\t\telse if (rgtNode.el === rgtSib) {\n\t\t\t\trgtNode = prevNode(rgtNode, body);\n\t\t\t\trgtSib = prevSib(rgtSib);\n\t\t\t}\n\t\t\telse\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (newSibs = headTailTry(parEl, lftSib, lftNode, rgtSib, rgtNode)) {\n\t\t\tlftSib = newSibs.lftSib;\n\t\t\trgtSib = newSibs.rgtSib;\n\t\t\tcontinue;\n\t\t}\n\n\t\tnewSibs = sortDOM(parEl, lftSib, rgtSib, cmpElNodeIdx);\n\t\tlftSib = newSibs.lftSib;\n\t\trgtSib = newSibs.rgtSib;\n\t}\n}","import { ELEMENT, TEXT, COMMENT, VVIEW, VMODEL } from './VTYPES';\nimport { isArr } from '../utils';\nimport { views } from './ViewModel';\nimport { syncChildren } from './syncChildren';\nimport { fireHooks } from './hooks';\nimport { patchAttrs } from './patchAttrs';\nimport { createView } from './createView';\nimport { FIXED_BODY, FAST_REMOVE } from './defineElement';\n\n//import { DEBUG } from './DEBUG';\n\nfunction findDonorNode(n, nPar, oPar, fromIdx, toIdx) {\t\t// pre-tested isView?\n\tvar oldBody = oPar.body;\n\n\tfor (var i = fromIdx || 0; i < oldBody.length; i++) {\n\t\tvar o = oldBody[i];\n\n\t\tif (n.type == VVIEW && o.vmid != null) {\t\t\t// also ignore recycled/moved?\n\t\t\tvar ov = views[o.vmid];\n\n\t\t\t// match by key & viewFn\n\t\t\tif (ov.view == n.view && ov.key == n.key)\n\t\t\t\treturn o;\n\t\t}\n\n\t\tif (o.recycled || n.tag !== o.tag || n.type !== o.type)\n\t\t\tcontinue;\n\n\t\t// if n.view\n\n\t\tif (n.key === o.key)\t\t// accounts for matching & both null\n\t\t\treturn o;\n\t\telse {\n\t\t\t//\n\t\t\tif (o.key == null) {\n\t\t\t\treturn o;\n\t\t\t}\n\t\t\t// n.key && o.key, ident?\n\t\t\telse {\n\t\t\t//\tconsole.log(n.key, o.key);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn null;\n}\n\n// have it handle initial hydrate? !donor?\n// types (and tags if ELEM) are assumed the same, and donor exists\nexport function patch(vnode, donor) {\n\tdonor.hooks && fireHooks(\"willRecycle\", donor, vnode);\n\n\tvar el = vnode.el = donor.el;\n\tdonor.recycled = true;\n\n\tvar obody = donor.body;\n\tvar nbody = vnode.body;\n\n\tel._node = vnode;\n\n\t// \"\" => \"\"\n\tif (vnode.type == TEXT && nbody !== obody) {\n\t\tel.nodeValue = nbody;\n\t\treturn;\n\t}\n\n\t// BUG: donation would break:\n\t// relies on both being present?\n\t// div (with attrs) <-> div (no attrs)\n\tif (vnode.attrs != null || donor.attrs != null)\n\t\tpatchAttrs(vnode, donor);\n\n\t// patch events\n\n\tvar oldIsArr = isArr(obody);\n\tvar newIsArr = isArr(nbody);\n\n//\tvar nonEqNewBody = nbody != null && nbody !== obody;\n\n\tif (oldIsArr) {\n\t\t// [] => []\n\t\tif (newIsArr) {\n\t\t//\tconsole.log('[] => []', obody, nbody);\n\t\t\t// graft children\n\t\t\tpatchChildren(vnode, donor);\n\t\t}\n\t\t// [] => \"\" | null\n\t\telse if (nbody !== obody) {\n\t\t\t// needs cleanup pass?\n\t\t//\tconsole.log('[] => \"\"', obody, nbody);\n\n\t\t\tif (nbody != null) {\n\t\t\t\tif (vnode.raw)\n\t\t\t\t\tel.innerHTML = nbody;\n\t\t\t\telse\n\t\t\t\t\tel.textContent = nbody;\n\t\t\t}\n\t\t\telse {\n\t\t\t\twhile (el.firstChild)\n\t\t\t\t\tel.removeChild(el.firstChild);\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\t// \"\" | null => []\n\t\tif (newIsArr) {\n\t\t//\tconsole.log('\"\" => []', obody, nbody);\t// hydrate new here?\n\t\t\twhile (el.firstChild)\n\t\t\t\tel.removeChild(el.firstChild);\n\t\t\tpatchChildren(vnode, donor);\n\t\t}\n\t\t// \"\" | null => \"\" | null\n\t\telse if (nbody !== obody) {\n\t\t//\tconsole.log('\"\" => \"\"', donor, vnode);\n\n\t\t\tif (vnode.raw)\n\t\t\t\tel.innerHTML = nbody;\n\t\t\telse if (el.firstChild)\n\t\t\t\tel.firstChild.nodeValue = nbody;\n\t\t\telse\n\t\t\t\tel.textContent = nbody;\n\t\t}\n\t}\n\n\tdonor.hooks && fireHooks(\"didRecycle\", donor, vnode);\n}\n\n// [] => []\nfunction patchChildren(vnode, donor) {\n\t// first unrecycled node (search head)\n\tvar fromIdx = 0;\n\n\tvar donor2, nbody = vnode.body;\n\n\tfor (var i = 0; i < nbody.length; i++) {\n\t\tvar node2 = nbody[i];\n\t\tvar type2 = node2.type;\n\n\t\tif (type2 == ELEMENT || type2 == TEXT || type2 == COMMENT) {\n\t\t\tif (donor2 = findDonorNode(node2, vnode, donor, fromIdx))\n\t\t\t\tpatch(node2, donor2);\n\t\t}\n\t\telse if (type2 == VVIEW) {\n\t\t\tif (donor2 = findDonorNode(node2, vnode, donor, fromIdx))\t\t// update/moveTo\n\t\t\t\tviews[donor2.vmid]._update(node2.model, vnode, i);\t\t// withDOM\n\t\t\telse\n\t\t\t\tcreateView(node2.view, node2.model, node2.key, node2.opts)._redraw(vnode, i, false);\t// createView, no dom (will be handled by sync below)\n\t\t}\n\t\telse if (type2 == VMODEL)\n\t\t\tviews[node2.vmid]._update(node2.model, vnode, i);\n\n\t\t// to keep search space small, if donation is non-contig, move node fwd?\n\t\t// re-establish contigindex\n\n\t\tif (donor2) {\n\t\t\tif (donor2.idx == fromIdx) {\t\t\t\t\t\t\t// todo: conditional contigidx (first non-null)\n\t\t\t//\twhile (obody[fromIdx] && obody[fromIdx].recycled)\n\t\t\t\tfromIdx++;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!(vnode.flags & FIXED_BODY))\n\t\tsyncChildren(vnode, vnode.el);\n}","import { ELEMENT, TEXT, COMMENT, VVIEW, VMODEL } from './VTYPES';\nimport { isVal, isArr, isFunc, insertArr, deepSet } from '../utils';\nimport { isStream, streamVal } from '../streamCfg';\nimport { hookStream } from './utils';\n\nfunction setRef(vm, name, node) {\n\tvar path = [\"refs\"].concat(name.replace(\"^\", \"\").split(\".\"));\n\n\tdeepSet(vm, path, node);\n\n\t// bubble\n\tvar par;\n\tif (name[0] == \"^\" && (par = vm.parent()))\n\t\tsetRef(par, name, node);\n}\n\n// vnew, vold\nexport function preProc(vnew, parent, idx, ownVmid, extKey) {\t\t// , parentVm\n\t// injected views\n\tif (vnew.type === VMODEL) {\n\t\t// pull vm.node out & reassociate\n\t\t// redraw?\n\t}\n\telse if (vnew.type === VVIEW) {\n\n\t}\n\t// injected and declared elems/text/comments\n\telse {\n\t\tvnew.parent = parent;\n\t\tvnew.idx = idx;\n\t\tvnew.vmid = ownVmid;\n\n\t\t// set external ref eg vw(MyView, data, \"^moo\")\n\t\tif (extKey != null && typeof extKey == \"string\" && extKey[0] == \"^\")\n\t\t\tvnew.ref = extKey;\n\n\t\tif (vnew.ref != null)\n\t\t\tsetRef(vnew.vm(), vnew.ref, vnew);\n\n\t\tif (isArr(vnew.body)) {\n\t\t// declarative elems, comments, text nodes\n\t\t\tvar body = vnew.body;\n\n\t\t\tfor (var i = 0; i < body.length; i++) {\n\t\t\t\tvar node2 = body[i];\n\n//\t\t\t\tif (isFunc(node2))\n//\t\t\t\t\tnode2 = body[i] = node2();\n\n\t\t\t\t// remove null/undefined\n\t\t\t\tif (node2 == null)\n\t\t\t\t\tbody.splice(i--, 1);\n\t\t\t\t// flatten arrays\n\t\t\t\telse if (isArr(node2))\n\t\t\t\t\tinsertArr(body, node2, i--, 1);\n\t\t\t\telse if (node2.type === TEXT) {\n\t\t\t\t\t// remove empty text nodes\n\t\t\t\t\tif (node2.body == null || node2.body === \"\")\n\t\t\t\t\t\tbody.splice(i--, 1);\n\t\t\t\t\t// merge with previous text node\n\t\t\t\t\telse if (i > 0 && body[i-1].type === TEXT) {\n\t\t\t\t\t\tbody[i-1].body += node2.body;\n\t\t\t\t\t\tbody.splice(i--, 1);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tpreProc(node2, vnew, i);\t\t// , /*vnew.vm ||*/ parentVm\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t//\t\tif (node2.ref != null)\n\t\t\t//\t\t\tparentVm.setRef(node2.ref, node2);\n\n\t\t\t\t\tpreProc(node2, vnew, i);\t\t\t// , /*vnew.vm ||*/ parentVm\n\t/*\n\t\t\t\t\t// init/populate keys in in parent\n\t\t\t\t\tif (node2.key != null) {\n\t\t\t\t\t\tif (vnew.keys == null)\n\t\t\t\t\t\t\tvnew.keys = {};\n\n\t\t\t\t\t\tvnew.keys[node2.key] = i;\n\t\t\t\t\t}\n\t*/\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (isStream != null && isStream(vnew.body))\n\t\t\tvnew.body = hookStream(vnew.body, vnew.vm());\n\t}\n}","import { patch } from \"./patch\";\nimport { hydrate } from \"./hydrate\";\nimport { preProc } from \"./preProc\";\nimport { isArr, isObj, isFunc, isProm, cmpArr, assignObj, curry, raft } from \"../utils\";\nimport { repaint } from \"./utils\";\nimport { insertBefore, removeChild, nextSib } from \"./dom\";\nimport { didQueue, fireHooks } from \"./hooks\";\n\n// global id counter\nlet vmid = 0;\n\n// global registry of all views\n// this helps the gc by simplifying the graph\nexport const views = {};\n\nexport function ViewModel(view, model, key, opts) {\t\t\t// parent, idx, parentVm\n\tvar id = vmid++;\n\n\tvar vm = this;\n\n\tvm.api = {};\n\n\tvm.id = id;\n\tvm.view = view;\n\tvm.model = model;\n\tvm.key = key == null ? model : key;\n\n\tvar out = view.call(vm.api, vm, model, key);\t\t\t// , opts\n\n\tif (isFunc(out))\n\t\tvm.render = out;\n\telse {\n\t\tif (out.diff) {\n\t\t\tvm.diff(out.diff);\n\t\t\tdelete out.diff;\n\t\t}\n\n\t\tassignObj(vm, out);\n\t}\n\n\tviews[id] = vm;\n\n\t// remove this?\n\tif (opts) {\n\t\tif (opts.hooks)\n\t\t\tvm.hook(opts.hooks);\n\t//\tif (opts.diff)\n\t//\t\tthis.diff(opts.diff);\n\t}\n\n\t// these must be created here since debounced per view\n\tvm._redrawAsync = raft(_ => vm._redraw());\n\tvm._updateAsync = raft(newModel => vm._update(newModel));\n\n//\tthis.update(model, parent, idx, parentVm, false);\n\n\t// proc opts, evctx, watch\n\n//\tthis.update = function(model, withRedraw, parent, idx, parentVm) {};\n}\n\nexport const ViewModelProto = ViewModel.prototype = {\n\tconstructor: ViewModel,\n\n\tid: null,\n\n\t// view + key serve as the vm's unique identity\n\tview: null,\n\tkey: null,\n\tmodel: null,\n\tnode: null,\n//\tdiff: null,\n//\tdiffLast: null,\t// prior array of diff values\n\thooks: null,\n\trender: null,\n\n//\t_setRef: function() {},\n\n\t// as plugins?\n\tparent: function() {\n\t\tvar p = this.node;\n\n\t\twhile (p = p.parent) {\n\t\t\tif (p.vmid != null)\n\t\t\t\treturn views[p.vmid];\n\t\t}\n\n\t\treturn null;\n\t},\n\n\tbody: function() {\n\t\treturn nextSubVms(this.node, []);\n\t},\n\n\troot: function() {\n\t\tvar p = this.node;\n\n\t\twhile (p.parent)\n\t\t\tp = p.parent;\n\n\t\treturn views[p.vmid];\n\t},\n\n\tapi: null,\n\trefs: null,\n\tmount: mount,\n\tunmount: unmount,\n\tredraw: function(sync) {\n\t\tvar vm = this;\n\t\tsync ? vm._redraw() : vm._redrawAsync();\n\t\treturn vm;\n\t},\n\tupdate: function(newModel, sync) {\n\t\tvar vm = this;\n\t\tsync ? vm._update(newModel) : vm._updateAsync(newModel);\n\t\treturn vm;\n\t},\n\n\t// if fragment view, this is set to a [head, tail] tuple of wrapping CommentNodes\n\t_frag: null,\n\n\t_update: updateSync,\n\t_redraw: redrawSync,\t// non-coalesced / synchronous\n\t_redrawAsync: null,\t\t// this is set in constructor per view\n\t_updateAsync: null,\n\n\t_diff: null,\n\t_diffArr: [],\n\t/*\n\tfunction(ancest) {\n\t//\tvar vm = this;\n\t//\treturn !ancest : redraw.call(vm) vm.parent ? vm.parent.redraw(ancest - 1);\n\t},\n\t*/\n\tdiff: function(diff) {\n\t\tvar vm = this;\n\t\tthis._diff = function(model) {\n\t\t\tvar diffArr = diff(model);\n\n\t\t\tif (!cmpArr(diffArr, vm._diffArr)) {\n\t\t\t\tvm._diffArr = diffArr;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\t},\n//\thooks: function(hooks) {},\n\thook: function(hooks) {\n\t\tthis.hooks = hooks;\n\t},\n\tevents: null,\n};\n\nfunction nextSubVms(n, accum) {\n\tvar body = n.body;\n\n\tif (isArr(body)) {\n\t\tfor (var i = 0; i < body.length; i++) {\n\t\t\tvar n2 = body[i];\n\n\t\t\tif (n2.vmid != null)\n\t\t\t\taccum.push(views[n2.vmid]);\n\t\t\telse\n\t\t\t\tnextSubVms(n2, accum);\n\t\t}\n\t}\n\n\treturn accum;\n}\n\nexport function drainDidHooks(vm) {\n\tif (didQueue.length) {\n\t\trepaint(vm.node);\n\n\t\tvar item;\n\t\twhile (item = didQueue.shift())\n\t\t\titem[0](item[1], item[2]);\n\t}\n}\n\nfunction isEmptyObj(o) {\n\tfor (var k in o)\n\t\treturn false;\n\treturn true;\n}\n\nexport function cleanExposedRefs(orefs, nrefs) {\n\tfor (var key in orefs) {\n\t\t// ref not present in new refs\n\t\tif (nrefs == null || !(key in nrefs)) {\n\t\t\tvar val = orefs[key];\n\n\t\t\t/*\n\t\t\tvar path = [];\n\t\t\t// dig nown if val i a namespace\n\t\t\twhile (isObj(val) && val.type == null) {\n\t\t\t\tpath.push(val);\n\t\t\t\tval =\n\t\t\t}\n\t\t\t*/\n\n\t\t\tif (isObj(val)) {\n\t\t\t\t// is a vnode\n\t\t\t\tif (val.type) {\n\t\t\t\t\t// is an exposed ref\n\t\t\t\t\tif (val.ref[0] == \"^\") {\n\t\t\t\t\t\tconsole.log(\"clean parents of absent exposed ref\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// is namespace, dig down\n\t\t\t\telse {\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction mount(el, isRoot, withDOM) {\t\t// , asSub, refEl\n\tvar vm = this;\n\n\tif (isRoot) {\n\t\twhile (el.firstChild)\n\t\t\tel.removeChild(el.firstChild);\n\n\t\tthis._redraw(null, null, false);\n\t\thydrate(this.node, el);\n\t}\n\telse {\n\t\tthis._redraw(null, null, withDOM);\n\n\t\tif (el)\n\t\t\tinsertBefore(el, this.node.el);\t\t\t// el.appendChild(this.node.el);\n\t}\n\n\tif (el)\n\t\tdrainDidHooks(this);\n\n\treturn this;\n}\n\n// asSub = true means this was called from a sub-routine, so don't drain did* hook queue\n// immediate = true means did* hook will not be queued (usually cause this is a promise resolution)\nfunction unmount(asSub) {\n\tvar vm = this;\n\n\tvar node = vm.node;\n\tvar parEl = node.el.parentNode;\n\n\t// edge bug: this could also be willRemove promise-delayed; should .then() or something to make sure hooks fire in order\n\tremoveChild(parEl, node.el);\n\n\tdelete views[vm.id];\n\tvm.node = node.parent = null;\t// unhook to help gc?\n\n//\tvm.hooks && fireHooks(\"didUnmount\", vm, null, immediate);\n\n\tif (!asSub)\n\t\tdrainDidHooks(vm);\n}\n\n// level, isRoot?\n// newParent, newIdx\n// ancest by ref, by key\nfunction redrawSync(newParent, newIdx, withDOM) {\n\tconst isRedrawRoot = newParent == null;\n\tvar vm = this;\n\tvar isMounted = vm.node && vm.node.el && vm.node.el.parentNode;\n\n\tvar vold = vm.node;\n\n\t// no diff, just re-parent old\n\tif (vm._diff != null && vm._diff(vm.model)) {\n\t\t// will doing this outside of preproc cause de-opt, add shallow opt to preproc?\n\t\tif (vold && newParent) {\n\t\t\tnewParent.body[newIdx] = vold;\n\t\t\tvold.parent = newParent;\n\t\t}\n\t\treturn vm;\n\t}\n\n\tisMounted && vm.hooks && fireHooks(\"willRedraw\", vm);\n\n\t// todo: test result of willRedraw hooks before clearing refs\n\t// todo: also clean up any refs exposed by this view from parents, should tag with src_vm during setting\n\tif (vm.refs) {\n\t//\tvar orefs = vm.refs;\n\t\tvm.refs = null;\n\t}\n\n\n\tvar vnew = vm.render.call(vm.api, vm, vm.model, vm.key);\t\t// vm.opts\n\n\n\n//\tconsole.log(vm.key);\n\n\tvm.node = vnew;\n\n//\tvm.node = vnew;\n//\tvnew.vm = vm;\t\t\t// this causes a perf drop 1.53ms -> 1.62ms\t\t\thow important is this?\n//\tvnew.vmid = vm.id;\n\n\tif (newParent) {\n\t\tpreProc(vnew, newParent, newIdx, vm.id, vm.key);\n\t\tnewParent.body[newIdx] = vnew;\n\t\t// todo: bubble refs, etc?\n\t}\n\telse if (vold && vold.parent) {\n\t\tpreProc(vnew, vold.parent, vold.idx, vm.id, vm.key);\n\t\tvold.parent.body[vold.idx] = vnew;\n\t}\n\telse\n\t\tpreProc(vnew, null, null, vm.id, vm.key);\n\n\t// after preproc re-populates new refs find any exposed refs in old\n\t// that are not also in new and unset from all parents\n\t// only do for redraw roots since refs are reset at all redraw levels\n//\tif (isRedrawRoot && orefs)\n//\t\tcleanExposedRefs(orefs, vnew.refs);\n\n\tif (withDOM !== false) {\n\t\tif (vold) {\n\t\t\t// root node replacement\n\t\t\tif (vold.tag !== vnew.tag) {\n\t\t\t\tvar parEl = vold.el.parentNode;\n\t\t\t\tvar refEl = nextSib(vold.el);\n\t\t\t\tremoveChild(parEl, vold.el);\n\t\t\t\tinsertBefore(parEl, hydrate(vnew), refEl);\n\t\t\t}\n\t\t\telse\n\t\t\t\tpatch(vnew, vold);\n\t\t}\n\t\telse\n\t\t\thydrate(vnew);\n\t}\n\n\tisMounted && vm.hooks && fireHooks(\"didRedraw\", vm);\n\n\tif (isRedrawRoot && isMounted)\n\t\tdrainDidHooks(vm);\n\n\treturn vm;\n}\n\n// withRedraw?\n// this doubles as moveTo\n// will/didUpdate\nfunction updateSync(newModel, newParent, newIdx, withDOM) {\t\t\t// parentVm\n\tvar vm = this;\n\n\tif (newModel != null) {\t\t// && vm.key !== vm.model\n\t\tif (vm.model !== newModel) {\n\t\t\tvm.hooks && fireHooks(\"willUpdate\", vm, newModel);\t\t// willUpdate will be called ahead of willRedraw when model will be replaced\n\t\t\tvm.model = newModel;\n\t\t//\tvm.hooks && fireHooks(\"didUpdate\", vm, newModel);\t\t// should this fire at al?\n\t\t}\n\t}\n\n\t// TODO: prevent redraw from firing?\n\n\treturn vm._redraw(newParent, newIdx, withDOM);\n/*\n\tif (parentVm != null) {\n\t\tvm.parent = parentVm;\n\t\tparentVm.body.push(vm);\n\t}\n*/\n}","import { ELEMENT, TEXT, COMMENT, VVIEW, VMODEL } from './VTYPES';\nimport { VNode } from './VNode';\n\nexport function defineText(body) {\n\tvar n = new VNode(TEXT);\n\tn.body = body;\n\treturn n;\n}","import { ELEMENT, TEXT, COMMENT, VVIEW, VMODEL } from './VTYPES';\nimport { VNode } from './VNode';\n\nexport function defineComment(body) {\n\treturn new VNode(COMMENT).body(body);\n}","import { ELEMENT, TEXT, COMMENT, VVIEW, VMODEL, FRAGMENT } from './VTYPES';\nimport { VNode } from './VNode';\n\nexport function defineFragment(body) {\n\tvar node = new VNode(FRAGMENT);\n\tnode.body = body;\n\treturn node;\n}","import { ELEMENT, TEXT, COMMENT, VVIEW, VMODEL } from './VTYPES';\n\n// placeholder for declared views\nexport function VView(view, model, key, opts) {\n\tthis.view = view;\n\tthis.model = model;\n\tthis.key = key == null ? model : key;\t// same logic as ViewModel\n\tthis.opts = opts;\n}\n\nVView.prototype = {\n\tconstructor: VView,\n\n\ttype: VVIEW,\n\tview: null,\n\tmodel: null,\n\tkey: null,\n\topts: null,\n};","import { VView } from './VView';\n\nexport function defineView(view, model, key, opts) {\n\treturn new VView(view, model, key, opts);\n}","import { ELEMENT, TEXT, COMMENT, VVIEW, VMODEL } from './VTYPES';\n\n// placeholder for injected ViewModels\nexport function VModel(vm) {\n\tthis.vmid = vm.id;\n}\n\nVModel.prototype = {\n\tconstructor: VModel,\n\n\ttype: VMODEL,\n\tvmid: null,\n};","import { VModel } from './VModel';\n\n\nexport function injectView(vm) {\n//\tif (vm.node == null)\n//\t\tvm._redraw(null, null, false);\n\n//\treturn vm.node;\n\n\treturn new VModel(vm);\n}","import { ELEMENT, TEXT, COMMENT, VVIEW, VMODEL } from './VTYPES';\nimport { VNode } from './VNode';\n\nexport function injectElement(el) {\n\tvar node = new VNode(ELEMENT);\n\tnode.el = node.key = el;\n\treturn node;\n}","import { ViewModel } from \"../../src/view/ViewModel\";\nimport { VNode } from \"../../src/view/VNode\";\n\nimport { createView } from \"../../src/view/createView\";\n\nimport { defineElement, FIXED_BODY, FAST_REMOVE } from \"../../src/view/defineElement\";\nimport { defineText } from \"../../src/view/defineText\";\nimport { defineComment } from \"../../src/view/defineComment\";\nimport { defineFragment } from \"../../src/view/defineFragment\";\nimport { defineView } from \"../../src/view/defineView\";\n\nimport { injectView } from \"../../src/view/injectView\";\nimport { injectElement } from \"../../src/view/injectElement\";\n\nexport default {\n\tViewModel,\n\tVNode,\n\n\tcreateView,\n\n\tdefineElement,\n\tdefineText,\n\tdefineComment,\n\tdefineFragment,\n\tdefineView,\n\n\tinjectView,\n\tinjectElement,\n\n\tFIXED_BODY,\n\tFAST_REMOVE,\n}","import { assignObj } from '../../utils';\nimport { patchAttrs } from '../patchAttrs';\nimport { preProc } from '../preProc';\nimport { patch as fullPatch } from '../patch';\nimport { drainDidHooks } from '../ViewModel';\n\nimport { VNodeProto } from '../VNode';\n\nVNodeProto.patch = function(n) {\n\treturn patch(this, n);\n};\n\n// newNode can be either {class: style: } or full new VNode\n// will/didPatch hooks?\nexport function patch(o, n) {\n\tif (n.type != null) {\n\t\t// no full patching of view roots, just use redraw!\n\t\tif (o.vmid != null)\n\t\t\treturn;\n\n\t\tpreProc(n, o.parent, o.idx, null, null);\n\t\to.parent.body[o.idx] = n;\n//\t\to.parent = o.el = o.body = null;\t\t// helps gc?\n\t\tfullPatch(n, o);\n\t\tdrainDidHooks(n.vm());\n\t}\n\telse {\n\t\t// TODO: re-establish refs\n\n\t\t// shallow-clone target\n\t\tvar donor = Object.create(o);\n\t\t// fixate orig attrs\n\t\tdonor.attrs = assignObj({}, o.attrs);\n\t\t// assign new attrs into live targ node\n\t\tvar oattrs = assignObj(o.attrs, donor.attrs, n);\n\t\t// prepend any fixed shorthand class\n\t\tif (o._class != null) {\n\t\t\tvar aclass = oattrs.class;\n\t\t\toattrs.class = aclass != null && aclass != \"\" ? o._class + \" \" + aclass : o._class;\n\t\t}\n\n\t\tpatchAttrs(o, donor);\n\t}\n}","import { ViewModelProto } from '../ViewModel';\nimport { isVal, sliceArgs } from '../../utils';\n\nViewModelProto.emit = emit;\nViewModelProto.on = on;\n\nfunction emit(evName) {\n\tvar targ = this;\n\n\tdo {\n\t\tvar evs = targ.events;\n\t\tvar fn = evs ? evs[evName] : null;\n\n\t\tif (fn) {\n\t\t\tfn.apply(null, sliceArgs(arguments, 1));\n\t\t\tbreak;\n\t\t}\n\n\t} while (targ = targ.parent());\n}\n\nfunction on(evName, fn) {\n\tvar t = this;\n\n\tif (t.events == null)\n\t\tt.events = {};\n\n\tif (isVal(evName))\n\t\tt.events[evName] = fn;\n\telse {\n\t\tvar evs = evName;\n\t\tfor (var evName in evs)\n\t\t\tt.on(evName, evs[evName]);\n\t}\n}\n\nfunction off() {}","import { streamCfg } from './streamCfg';\n\nif (typeof flyd != \"undefined\") {\n\tstreamCfg({\n\t\tis:\t\ts => flyd.isStream(s),\n\t\tval:\ts => s(),\n\t\tsub:\t(s, fn) => flyd.on(fn, s),\n\t\tunsub:\ts => s.end(true),\n\t});\n}","import micro from './micro';\n\nimport { streamCfg } from \"../../src/streamCfg\";\nimport \"../../src/streamFlyd.js\";\n\nmicro.streamCfg = streamCfg;\n\nimport { prop } from \"../../src/utils\";\n\nmicro.prop = prop;\n\nexport default micro;","\tvar stack = [], pos = null,\t\t// these should go into sessionStorage\n\t\tuseHist = false,\n\t\twillEnter = null,\n\t\twillExit = null,\n\t\tdidEnter = null,\n\t\tdidExit = null,\n\t\tnotFound = null,\n\t\troot = \"\";\n\n\texport function createRouter(routeFn, imp) {\n\t\tvar init = null;\n\n\t\tfunction routeFromLoc() {\n\t\t\tvar l = location;\n\t\t\tvar href = useHist ? l.href.substr(l.origin.length) : (l.hash.substr(1) || \"/\");\n\t\t\treturn buildRoute(routes, root, href);\n\t\t}\n\n\t\tvar api = {\n//\t\t\taddRoute: function() {},\n//\t\t\tdelRoute: function() {},\n//\t\t\toninit: function() {},\n//\t\t\tonEnter, onLeave\n\t\t\thref: function(name, segs, query, hash, repl) {\n\t\t\t\tvar route = buildRoute(routes, root, name, segs, query, hash);\n\t\t\t\treturn (useHist ? \"\" : \"#\") + route.href;\n\t\t\t},\n\t\t\tconfig: function(opts) {\n\t\t\t\tuseHist = opts.useHist;\n\n\t\t\t\tif (useHist)\n\t\t\t\t\troot = opts.root || \"\";\n\n\t\t\t\twillEnter = opts.willEnter || null;\n\t\t\t\twillExit = opts.willExit || null;\n\t\t\t\tdidEnter = opts.didEnter || null;\n\t\t\t\tdidExit = opts.didExit || null;\n\t\t\t\tnotFound = opts.notFound || null;\n\n\t\t\t\tinit = opts.init || null;\n\t\t\t},\n\t\t\trefresh: function() {\n\t\t\t\tapi.goto(routeFromLoc(),null,null,null,true);\n\t\t\t},\n\t\t\t// dest can be route key, href or route object from buildRoute()\n\t\t\tgoto: function(dest, segs, query, hash, repl, noFns) {\n\t\t\t\tif (!dest.href)\n\t\t\t\t\tdest = buildRoute(routes, root, dest, segs, query, hash);\n\n\t\t\t\t// is \"_noMatch\" a route? not really since there are multiple views, nomatch needs to accept original intended route\n\t\t\t\tif (dest.name === false) {\n\t\t\t\t\tif (notFound)\n\t\t\t\t\t\tnotFound(dest);\t\t// || .apply(null, arguments)?\n\t\t\t\t\telse\n\t\t\t\t\t\tconsole.log(\"Could not find route\");\t\t// loop back to _noMatch?\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// BUG?: this will push dest onto stack before running can* checks, so\n\n\t\t\t\t\tvar toPos = null;\n\t\t\t\t\tvar dir = 0;\n\t\t\t\t\tfor (var i = 0; i < stack.length; i++) {\n\t\t\t\t\t\tif (stack[i].href === dest.href) {\t\t// set repl?\n\t\t\t\t\t\t\ttoPos = i;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// new fwd\n\t\t\t\t\tif (toPos === null) {\n\t\t\t\t\t\tstack.splice(pos+1, 1e4);\t// trim array\n\t\t\t\t\t\tstack.push(dest);\n\t\t\t\t\t\ttoPos = stack.length - 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar prev = stack[pos];\n\t\t\t\t\tvar next = stack[toPos];\n\n\t\t\t\t\tvar canExit = true;\n\t\t\t\t\tvar canEnter = true;\n\n\t\t\t\t\tif (pos !== null) {\n\t\t\t\t\t\tif (willExit)\n\t\t\t\t\t\t\tcanExit = noFns || willExit(prev, next);\n\n\t\t\t\t\t\tif (canExit !== false) {\n\t\t\t\t\t\t\tvar onexit = routes[prev.name].onexit;\n\t\t\t\t\t\t\tcanExit = !onexit ? true : noFns || onexit.apply(null, (prev ? [prev.segs, prev.query, prev.hash] : []).concat(next));\n\n\t\t\t\t\t\t\tif (didExit)\n\t\t\t\t\t\t\t\tdidExit(prev, next);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t//\trevert nav?\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (canExit !== false) {\n\t\t\t\t\t\tif (willEnter)\n\t\t\t\t\t\t\tcanEnter = noFns || willEnter(next, prev);\n\n\t\t\t\t\t\tif (canEnter !== false) {\n\t\t\t\t\t\t\tvar onenter = routes[next.name].onenter;\n\t\t\t\t\t\t\tcanEnter = noFns || onenter.apply(null, (next ? [next.segs, next.query, next.hash] : []).concat(prev));\n\n\t\t\t\t\t\t\tif (didEnter)\n\t\t\t\t\t\t\t\tdidEnter(next, prev);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (canEnter !== false) {\n\t\t\t\t\t\t\tif (useHist) {\n\t\t\t\t\t\t\t\tgotoLocChg = true;\n\t\t\t\t\t\t\t\thistory[repl ? \"replaceState\" : \"pushState\"](null, \"title\", next.href);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tvar hash = \"#\"+next.href;\n\n\t\t\t\t\t\t\t\tif (location.hash !== hash) {\n\t\t\t\t\t\t\t\t\tgotoLocChg = true;\n\n\t\t\t\t\t\t\t\t\tif (repl)\n\t\t\t\t\t\t\t\t\t\tlocation.replace(hash);\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\tlocation.hash = hash;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tpos = toPos;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t//\trevert nav?\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t// in contrast to goto(), this route getter/setter does not\n\t\t\t// invoke handlers and is designed to reflect an already changed\n\t\t\t// app/view state rather than requesting a state change\n\t\t\troute: function(dest, segs, query, hash, repl) {\n\t\t\t\tif (dest != null)\n\t\t\t\t\tapi.goto(dest, segs, query, hash, repl, true);\t\t\t\t// TODO: avoid setting current if same as dest\n\t\t\t\telse\n\t\t\t\t\treturn pos == null ? routeFromLoc() : stack[pos];\n\t\t\t},\n\t//\t\tnext:\n\t//\t\tprev:\t\t// revert path\n\t\t};\n\n\t\t// BC compat\n\t\tapi.location = api.route;\n\n\t\tvar routes = routeFn(api, imp);\n\n\t\tbuildRegexPaths(routes, root);\n\n\t\t// tmp flag that indicates that hash or location changed as result of a goto call rather than natively.\n\t\t// prevents cyclic goto->hashchange->goto...\n\t\tvar gotoLocChg = false;\n\n\t\twindow.onhashchange = window.onpopstate = function(e) {\n\t\t\tif (!useHist && e.type == \"popstate\")\n\t\t\t\treturn;\n\n\t\t\tif (!useHist && gotoLocChg) {\n\t\t\t\tgotoLocChg = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tapi.goto(routeFromLoc(),null,null,null,true);\n\t\t};\n\n\t\tinit && init();\n\n\t\treturn api;\n\t};\n\n\t// builds uniform route args and matches routes\n\t// if href (including root) is provided for nameOrHref, root & remaining args are ignored\n\tfunction buildRoute(routes, root, nameOrHref, segs, query, hash) {\n\t\tvar path = null,\n\t\t\tname = null,\n\t\t\thref = null;\n\n\t\t// parse path, find route\n\t\tif (nameOrHref[0] == \"/\") {\n\t\t\thref = nameOrHref;\n\t\t\tname = false;\n\t\t\tsegs = {};\n\n\t\t\tvar pathHash = href.split(\"#\"),\n\t\t\t\tpathQuery = pathHash[0].split(\"?\");\n\n\t\t\tpath = pathQuery[0];\n\t\t\thash = pathHash[1];\n\n\t\t\tif (pathQuery[1]) {\n\t\t\t\tquery = {};\n\n\t\t\t\tpathQuery[1].split(\"&\").map(function(pair) {\n\t\t\t\t\tvar nameVal = pair.split(\"=\");\n\t\t\t\t\tquery[nameVal[0]] = nameVal[1] == null ? true : nameVal[1];\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// find name & segs by matching root + path\n\t\t\tvar match;\n\t\t\tfor (var i in routes) {\n\t\t\t\tvar rtDef = routes[i],\n\t\t\t\t\tpathDef = rtDef.path;\n\n\t\t//\t\tif (match = (root+path).match(rtDef.regexPath)) {\n\t\t\t\tif (match = (path).match(rtDef.regexPath)) {\n\t\t\t\t\tname = i;\n\n\t\t\t\t\tif (pathDef.indexOf(\":\") !== -1) {\n\t\t\t\t\t\tsegs = {};\n\t\t\t\t\t\tmatch.shift();\n\t\t\t\t\t\tpathDef.replace(/:([^\\/]+)/g, function(m, segName) {\n\t\t\t\t\t\t\tsegs[segName] = match.shift();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// build path\n\t\telse {\n\t\t\tname = nameOrHref;\n\n\t\t\tvar rtDef = routes[name],\n\t\t\t\tpathDef = root + rtDef.path,\n\t\t\t\tsegDef = rtDef.vars || {};\n\n\t\t\tif (pathDef.indexOf(\":\") !== -1) {\n\t\t\t\thref = path = pathDef.replace(/:([^\\/]+)/g, function(m, segName) {\n\t\t\t\t\tif ((segDef[segName] || /^[^\\/]+$/).test(segs[segName]))\n\t\t\t\t\t\treturn (segs[segName] += \"\");\n\n\t\t\t\t\tthrow new Error(\"Invalid value for route '\"+pathDef+\"' segment '\"+segName+\"': '\"+segs[segName]+\"'\");\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t\thref = path = pathDef;\n\n\t\t\tif (query) {\n\t\t\t\thref += \"?\";\n\t\t\t\tfor (var q in query)\n\t\t\t\t\thref += q + (query[q] !== true ? \"=\" + query[q] : \"\") + \"&\";\t\t\t// todo: trim \"&\", urlencode\n\t\t\t\thref = href.slice(0,-1);\n\t\t\t}\n\n\t\t\thref += hash ? (\"#\" + hash) : \"\";\n\t\t}\n\n\t\treturn {\n\t\t\thref: href,\n\t\t\tname: name,\n\t\t\tpath: path,\n\t\t\tsegs: segs,\n\t\t\thash: hash,\n\t\t\tquery: query,\n\t\t};\n\t}\n\n\t// creates full regex paths by merging regex param validations\n\tfunction buildRegexPaths(routes, root) {\n\t\tfor (var i in routes) {\n\t\t\tvar r = routes[i];\n\t\t\t// todo: first replace r.path regexp special chrs via RegExp.escape?\n\t\t\tr.regexPath = new RegExp(\"^\" + root +\n\t\t\t\tr.path.replace(/:([^\\/]+)/g, function(m, name) {\n\t\t\t\t\tvar segDef = r.vars || {};\n\t\t\t\t\tvar regExStr = \"\"+(segDef[name] || /[^\\/]+/);\n\t\t\t\t\treturn \"(\" + regExStr.substring(1, regExStr.lastIndexOf(\"/\")) + \")\";\n\t\t\t\t})\n\t\t\t+ \"$\");\n\t\t}\n\t}\n\n/*\n\tRegExp.escape = function(text) {\n\t\treturn text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, \"\\\\$&\");\n\t};\n*/","import mini from './mini';\n\nimport { createRouter } from '../../src/router';\nmini.createRouter = createRouter;\n\nexport default mini;"],"names":["const","let","patch","fullPatch","arguments","mini"],"mappings":"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"}